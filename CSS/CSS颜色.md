# CSS颜色

在CSS中，一共有4种方法表示颜色，除去HEX与RGB两种常用的表示方法外，还有HSL与HSV两种计算机颜色空间模型用于表示颜色。

## RGB颜色空间

HEX、RGB本质上是同一种表示方法，以下统称为RGB颜色空间。RGB可以说是最直观，最基础，也是最容易理解的一种颜色表示方法，其他颜色空间均可以通过RGB与转换公式来转换获取。RGB颜色空间以R(Red:红)、G(Green:绿)、B(Blue:蓝)三种基本色为基础，进行不同程度的叠加，产生丰富而广泛的颜色，所以也称三基色模式。

选用红绿蓝作为颜色基本色，也是源于红绿蓝为光学三原色，即不可分解的颜色，其余颜色均可以通过调整三原色的色值来调和完成。在RGB颜色空间中，三原色的色值均有 ``2^8 = 256`` 个等级，这也表明该颜色空间共有 ``2^24 = 256^3 = 16777216`` 种不同颜色可表示。

由于三原色通过叠加来调色，而三原色本身的色值相互独立，所以可以使用笛卡尔系来对RGB颜色空间做一个形象化的表示，坐标值通过将RGB三值分别除以255获得。

![RGB](./images/RGB.jpg)

在浏览器中，可以看到RGB的表示方法，如下图红色系，就是 ``R = 255, G = B`` 这个空间截面。

![RGB1](./images/RGB1.png)

而HEX表示方法就是将RGB三个值分别转化为十六进制数值后拼接即可，如白色``rgb(255, 0, 0)``等价于``#ffffff``

## HSL颜色空间

HSL(Hue, Saturation, Lightness)即色相、饱和度、亮度。色相(H)是色彩的基本属性，就是平常所说的颜色名称，如红色、黄色等。饱和度(S)是指色彩的纯度，越高色彩越纯，低则逐渐变灰，取0-100%的数值。亮度(L)，同样取0-100%，亮度越高，颜色越白，反之越黑，亮度取50%时，为正常亮度。

![HSL](./images/HSL.jpg)

HSL颜色空间，可以具象化为一个圆柱坐标系，即一个极坐标系与一个直角坐标系的结合。与RGB颜色空间相对比，将(1, 1, 1)与(0, 0, 0)两个白黑色点展开为一个圆形平面即可得到一个HSL颜色空间。RGB转化为HSL的公式如下。

![RGB2HSL](./images/RGB2HSL.png)

## HSV颜色空间

HSV(Hue, Saturation, value)即色相、饱和度、亮度、明度，又称HSB。与HSL的区别就在于最后这个V上，明度(V)同样取0-100%的数值。在HSV中，当“光”足够的情况下，颜色会成为颜色其本身，而HSL中，颜色会变成白色。

![HSV](./images/HSV.png)

HSV颜色空间，具象化为一个圆锥坐标系，本质上还是RGB笛卡尔系的一个变形，黑色点与白色点依旧在各自的点位上。RGB转HSV的公式如下，由于色相(H)在HSL与HSV两个颜色空间下表示的含义相同，所以H的算法同上。

![RGB2HSV](./images/RGB2HSV.png)

## 透明度(opacity)

对于以上三种颜色空间来说，都有一个共有的表示维度，透明度(opacity)，在颜色空间中，用``a``来表示。当``a=1``时，颜色完全不透明，颜色就为其本身。当``a=0``时，颜色完全透明，该位置将完全展示该颜色下面一层的颜色。

透明度本身似乎表示了颜色的透明程度，而本质上，其实也只是一种颜色的计算方式，是当前颜色与其下层颜色的叠加。以RGB颜色空间为例，现在假设颜色本身为``color``，其下层颜色为``bg-color``，透明度为``a``。那么使用透明度后的实际颜色``real-color``计算公式如下。

```
real-color = bg-color * (1 - a) + color * a
```

比如透明度为50%的红色``rgb(255, 0, 0, 0.5)``置于白色背景``rgb(255, 255, 255, 1)``上等价于``rgb(255, 127, 127, 1)``。

## 颜色空间的应用

在进行拾色器的开发中，拾色器颜色的变化往往会通过某种规律呈现，通过将颜色从数值具象化为一个坐标系的数学模型，这种规律就能够转化为空间曲线、空间曲面来表达，当有了一个空间中的基准点与一个空间曲线、空间曲面，那么拾色器的开发就会显得非常简单。